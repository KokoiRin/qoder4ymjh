# 快速开始指南

<cite>
**本文档中引用的文件**
- [CMakeLists.txt](file://CMakeLists.txt)
- [README.md](file://README.md)
- [build_instructions.md](file://build_instructions.md)
- [src/main.cpp](file://src/main.cpp)
- [include/ui/MainWindow.h](file://include/ui/MainWindow.h)
- [src/ui/MainWindow.cpp](file://src/ui/MainWindow.cpp)
</cite>

## 目录
1. [简介](#简介)
2. [构建环境要求](#构建环境要求)
3. [使用CLion构建项目](#使用clion构建项目)
4. [使用命令行构建项目](#使用命令行构建项目)
5. [CMake配置详解](#cmake配置详解)
6. [常见问题与解决方案](#常见问题与解决方案)
7. [程序运行验证](#程序运行验证)

## 简介
本指南旨在为开发者提供一个清晰、详细的入门指导，帮助快速编译和运行new项目。该项目是一个基于Qt6的高级窗口操作工具，具备窗口绑定、颜色拾取和点击模拟等核心功能。通过本指南，您将学习如何在不同环境下配置构建系统，并成功启动应用程序。

**Section sources**
- [README.md](file://README.md#L0-L186)
- [build_instructions.md](file://build_instructions.md#L0-L78)

## 构建环境要求
要成功编译和运行本项目，必须满足以下软件和硬件条件：

- **操作系统**: Windows（推荐Windows 10或更高版本）
- **Qt框架**: Qt6（建议6.5及以上版本），用于UI界面和核心功能支持
- **构建工具**: CMake 3.16或更高版本，负责跨平台项目配置
- **编译器**: 支持C++17标准的编译器，如：
  - Microsoft Visual Studio（MSVC）2019/2022
  - MinGW-w64（推荐使用与Qt配套的版本）

这些依赖项是项目正常工作的基础。未正确安装任一组件都可能导致构建失败。

**Section sources**
- [README.md](file://README.md#L120-L130)
- [build_instructions.md](file://build_instructions.md#L40-L50)

## 使用CLion构建项目
CLion是一款强大的C++集成开发环境，支持直接打开并配置CMake项目。

### 步骤一：打开项目
1. 启动CLion IDE。
2. 选择“File” → “Open”菜单项。
3. 浏览至项目根目录 `` 并选中包含 `CMakeLists.txt` 的文件夹。
4. CLion会自动识别为CMake项目并开始加载。

### 步骤二：配置Qt路径（如需）
若CLion未能自动找到Qt安装位置，请手动指定路径：
1. 进入“File” → “Settings” → “Build, Execution, Deployment” → “CMake”。
2. 在"CMake options"输入框中添加如下参数：
   ```
   -DCMAKE_PREFIX_PATH="你的Qt安装路径"
   ```
   示例（根据实际安装路径调整）：
   ```
   -DCMAKE_PREFIX_PATH="C:/Qt/6.5.0/msvc2019_64"
   ```

### 步骤三：编译与运行
1. 等待CMake完成配置后，选择目标 `QtDemo`。
2. 点击绿色运行按钮或按 `Shift+F10` 开始构建。
3. 成功后程序将自动启动，显示主窗口界面。

**Section sources**
- [README.md](file://README.md#L131-L178)
- [build_instructions.md](file://build_instructions.md#L1-L30)

## 使用命令行构建项目
对于偏好命令行操作的用户，可采用以下两种方式之一进行构建。

### 方法一：使用Visual Studio Build Tools
适用于已安装Visual Studio或其构建工具链的环境：
```powershell
# 打开 "Developer Command Prompt for VS"
cd ""
mkdir build
cd build
cmake ..
cmake --build .
```

### 方法二：使用MinGW
适用于使用MinGW-w64作为编译器的情况：
```powershell
# 确保MinGW已加入系统PATH
cd ""
mkdir build  
cd build
cmake -G "MinGW Makefiles" -DCMAKE_PREFIX_PATH="D:/Qt/6.9.2/mingw_64" ..
mingw32-make
```
> 注意：请将 `-DCMAKE_PREFIX_PATH` 参数中的路径替换为您本地Qt的实际安装路径。

**Section sources**
- [build_instructions.md](file://build_instructions.md#L32-L48)
- [CMakeLists.txt](file://CMakeLists.txt#L7-L8)

## CMake配置详解
`CMakeLists.txt` 是项目的构建脚本，定义了所有编译规则和依赖关系。

### 关键配置说明
| 配置项 | 说明 |
|--------|------|
| `set(CMAKE_CXX_STANDARD 17)` | 指定使用C++17标准 |
| `find_package(Qt6 REQUIRED COMPONENTS Core Widgets)` | 查找并链接Qt6的核心与控件模块 |
| `set(CMAKE_AUTOMOC ON)` | 启用MOC自动处理Qt元对象系统 |
| `set(CMAKE_AUTOUIC ON)` | 自动调用UIC编译.ui文件 |
| `target_link_libraries(QtDemo user32 gdi32)` | 链接Windows API库以实现底层操作 |

### 输出目录设置
构建产物（可执行文件）将输出到 `${CMAKE_BINARY_DIR}/bin` 目录下，便于统一管理。

**Section sources**
- [CMakeLists.txt](file://CMakeLists.txt#L0-L55)
- [build_instructions.md](file://build_instructions.md#L51-L52)

## 常见问题与解决方案
以下是构建过程中可能遇到的问题及其解决方法。

### 问题一：CMake无法找到Qt
**现象**：`find_package(Qt6 REQUIRED ...)` 报错，提示找不到包。
**解决方案**：
- 明确设置 `-DCMAKE_PREFIX_PATH` 指向Qt安装目录下的对应编译器子目录（如 `msvc2019_64` 或 `mingw_64`）。
- 或通过环境变量设置 `CMAKE_PREFIX_PATH`。

### 问题二：编译器未找到
**现象**：CMake报错无法检测到编译器。
**解决方案**：
- 确认已安装Visual Studio或MinGW，并可通过命令行访问（如 `cl.exe` 或 `g++.exe`）。
- 若使用VS，确保从“Developer Command Prompt”启动终端。

### 问题三：缺少Windows API库
**现象**：链接阶段报错找不到 `user32.lib` 或 `gdi32.lib`。
**解决方案**：
- 确保在Windows系统上构建。
- 安装完整的Windows SDK（通常随Visual Studio一起安装）。

**Section sources**
- [build_instructions.md](file://build_instructions.md#L60-L70)
- [CMakeLists.txt](file://CMakeLists.txt#L38-L41)

## 程序运行验证
成功构建并运行程序后，应观察到以下行为：

- 主窗口标题为 **"Qt Demo - 高级窗口操作工具"**。
- 窗口中央存在一个标有 **"点击我!"** 的按钮。
- 包含三大功能区域：
  1. **窗口绑定区**：可刷新、选择并绑定目标窗口。
  2. **颜色拾取区**：支持实时取色及格式显示（RGB/Hex）。
  3. **点击模拟区**：支持多种坐标系和鼠标按键的点击模拟。
- 点击原始按钮时弹出消息框：“你点击了按钮！”。

此界面表现表明项目已正确编译且功能完整。

**Section sources**
- [README.md](file://README.md#L180-L186)
- [src/main.cpp](file://src/main.cpp#L3-L21)
- [src/ui/MainWindow.cpp](file://src/ui/MainWindow.cpp#L25-L35)